{"version":3,"sources":["webpack://mercury-template/./template-src/js/map-google.js"],"names":["jQ","DEBUG","m_maps","m_mapData","m_mapStyle","m_apiKey","m_googleGeocoder","m_googleApiLoaded","showInfo","mapId","infoId","console","info","map","infoWindows","i","length","close","geocode","getGeocode","open","marker","hideAllInfo","setInfo","results","status","infoWindow","addressFound","google","maps","GeocoderStatus","OK","formatGeocode","warn","position","infoContent","getContent","replace","setContent","result","street","strNum","zip","city","foundAdr","address_components","t","String","types","indexOf","long_name","formatted_address","Geocoder","loadGoogleApi","initGoogleMaps","locale","Mercury","getInfo","mapKey","addLibs","isOnlineProject","loadScript","getPuempel","color","path","scale","fillOpacity","fillColor","strokeColor","darken","strokeWeight","showMarkers","group","markers","g","decodeURIComponent","setVisible","showSingleMap","mapData","id","mapOptions","zoom","parseInt","styles","scrollwheel","mapTypeId","eval","type","streetViewControl","mapTypeControlOptions","style","MapTypeControlStyle","DROPDOWN_MENU","mapTypeIds","Array","MapTypeId","ROADMAP","SATELLITE","HYBRID","TERRAIN","center","LatLng","centerLat","centerLng","Map","document","getElementById","event","addListener","this","setOptions","groups","groupsFound","p","point","getThemeJSON","Marker","lat","lng","title","icon","index","push","InfoWindow","content","showPlaceholder","showMap","log","currentTarget","mapToShow","init","jQuery","debug","$mapElements","PrivacyPolicy","cookiesAcceptedExternal","each","$mapElement","data","JSON","parse","attr","initPlaceholder","removeClass"],"mappings":"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","file":"mercury-map-google.js","sourcesContent":["/*\n * This program is part of the OpenCms Mercury Template.\n *\n * Copyright (c) Alkacon Software GmbH & Co. KG (http://www.alkacon.com)\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport tinycolor from 'tinycolor2';\n\n// the global objects that must be passed to this module\nvar jQ;\nvar DEBUG;\n\n\"use strict\";\n\n// all initialized Google maps\nvar m_maps = {};\n\n// all map data sets found on the page, as array for easy iteration\nvar m_mapData = [];\n\n// map styling\nvar m_mapStyle = [];\n\n// API key for accessing the map data\nvar m_apiKey;\n\n// the Google geocode object, used for resolving coordinates to address names\nvar m_googleGeocoder = null;\n\n// check if the API has already been loaded\nvar m_googleApiLoaded = false;\n\nfunction showInfo(mapId, infoId) {\n\n    if (DEBUG) console.info(\"GoogleMap showInfo() called with map id: \" + mapId + \" info id: \" + infoId);\n    var map = m_maps[mapId];\n    var infoWindows = map.infoWindows;\n    for (var i = 0; i < infoWindows.length; i++) {\n        if (i != infoId) {\n            infoWindows[i].close();\n        } else {\n            if (infoWindows[i].geocode == \"true\") {\n                if (DEBUG) console.info(\"showInfo() geocode lookup for \" + mapId);\n                getGeocode(infoWindows[i]);\n                infoWindows[i].geocode = \"false\";\n            }\n            infoWindows[i].open(\n                map,\n                infoWindows[i].marker\n            );\n        }\n    }\n}\n\nfunction hideAllInfo(mapId) {\n\n    if (DEBUG) console.info(\"GoogleMap hideAllInfo() called with map id: \" + mapId);\n    var map = m_maps[mapId];\n    var infoWindows = map.infoWindows;\n    for (var i = 0; i < infoWindows.length; i++) {\n        infoWindows[i].close();\n    }\n}\n\nfunction setInfo(results, status, infoWindow) {\n\n    if (DEBUG) console.info(\"GoogleMap setInfo() geocode lookup returned status \" + status);\n    var addressFound = \"\";\n    if (status == google.maps.GeocoderStatus.OK) {\n        if (results[0]) {\n            addressFound = formatGeocode(results[0]);\n        }\n    } else {\n        console.warn(\"GoogleMap GeoCoder returned error status '\" + status + \"' for coordinates \" + infoWindow.marker.position);\n    }\n    // replace content in info window\n    var infoContent = infoWindow.getContent();\n    infoContent = infoContent.replace(\"<div class='geoAdr'></div>\", addressFound);\n    infoWindow.setContent(infoContent);\n}\n\nfunction formatGeocode(result) {\n\n    // returns the address from a geocode result in nicely formatted way\n    var street = \"\";\n    var strNum = \"\";\n    var zip = \"\";\n    var city = \"\";\n    var foundAdr = false;\n\n    for (var i = 0; i < result.address_components.length; i++) {\n        var t = String(result.address_components[i].types);\n        if (street == \"\" && t.indexOf(\"route\") != -1) {\n            street = result.address_components[i].long_name;\n            foundAdr = true;\n        }\n        if (t.indexOf(\"street_number\") != -1) {\n            strNum = result.address_components[i].long_name;\n            foundAdr = true;\n        }\n        if (t.indexOf(\"postal_code\") != -1) {\n            zip = result.address_components[i].long_name;\n            foundAdr = true;\n        }\n        if (city == \"\" && t.indexOf(\"locality\") != -1) {\n            city = result.address_components[i].long_name;\n            foundAdr = true;\n        }\n    }\n    if (foundAdr == true) {\n        return street + \" \" + strNum + \"<br/>\" + zip + \" \" + city;\n    } else {\n        return result.formatted_address;\n    }\n}\n\nfunction getGeocode(infoWindow) {\n\n    if (m_googleGeocoder == null) {\n        // initialize global geocoder object if required\n        m_googleGeocoder = new google.maps.Geocoder();\n    }\n\n    m_googleGeocoder.geocode({'latLng': infoWindow.marker.position}, function(results, status) {\n        setInfo(results, status, infoWindow);\n    });\n}\n\nfunction loadGoogleApi() {\n\n    if (!m_googleApiLoaded) {\n        var locale = Mercury.getInfo(\"locale\");\n        var mapKey = \"\"\n        if (m_apiKey != null) {\n            mapKey = \"&key=\" + m_apiKey;\n        }\n        var addLibs = \"\";\n        if (! Mercury.isOnlineProject()) {\n            // need to load places API for OpenCms map editor\n            addLibs = \"&libraries=places\"\n        }\n        if (DEBUG) console.info(\"GoogleMap API key: \" + (mapKey == '' ? '(undefined)' : mapKey));\n        jQ.loadScript(\"https://maps.google.com/maps/api/js?callback=GoogleMap.initGoogleMaps&language=\" + locale + addLibs + mapKey, {}, DEBUG);\n        m_googleApiLoaded = true;\n    } else {\n        initGoogleMaps();\n    }\n}\n\n\nfunction getPuempel(color) {\n\n    var shade = \"\" + tinycolor(color).darken(20);\n    return {\n        path: 'M0-37.06c-5.53 0-10 4.15-10 9.26 0 7.4 8 9.26 10 27.8 2-18.54 10-20.4 10-27.8 0-5.1-4.47-9.26-10-9.26zm.08 7a2.9 2.9 0 0 1 2.9 2.9 2.9 2.9 0 0 1-2.9 2.9 2.9 2.9 0 0 1-2.9-2.9 2.9 2.9 0 0 1 2.9-2.9z',\n        scale: 1,\n        fillOpacity: 1,\n        fillColor: color,\n        strokeColor: shade,\n        strokeWeight: 1\n    };\n}\n\n/****** Exported functions ******/\n\nexport function showMarkers(mapId, group) {\n\n    if (DEBUG) console.info(\"GoogleMap showMapMarkers() called with map id: \" + mapId);\n    var map = m_maps[mapId];\n    if (map) {\n        var markers = map.markers;\n        var g = decodeURIComponent(group);\n        hideAllInfo(mapId);\n        for (var i = 0; i < markers.length; i++) {\n            if (markers[i].group == g || g == 'showall') {\n                markers[i].setVisible(true);\n            } else {\n                markers[i].setVisible(false);\n            }\n        }\n    }\n}\n\nfunction showSingleMap(mapData){\n\n    var mapId = mapData.id;\n\n    if (DEBUG) console.info(\"GoogleMap initializing map: \" + mapId);\n    var mapOptions = {\n        zoom: parseInt(mapData.zoom),\n        styles: m_mapStyle,\n        scrollwheel: false,\n        mapTypeId: eval(\"google.maps.MapTypeId.\" + mapData.type),\n        streetViewControl: false,\n        mapTypeControlOptions: {\n            style: google.maps.MapTypeControlStyle.DROPDOWN_MENU,\n            mapTypeIds: new Array(\n                google.maps.MapTypeId.ROADMAP,\n                google.maps.MapTypeId.SATELLITE,\n                google.maps.MapTypeId.HYBRID,\n                google.maps.MapTypeId.TERRAIN\n            )\n        },\n        center: new google.maps.LatLng(mapData.centerLat, mapData.centerLng)\n    }\n\n    // create the map\n    var map = new google.maps.Map(document.getElementById(mapId), mapOptions);\n\n    // enable mouse wheel scrolling after click\n    google.maps.event.addListener(map, 'click', function(event){\n        this.setOptions({scrollwheel:true});\n    });\n\n    // map markers and info windows\n    var markers = [];\n    var infoWindows = [];\n    var groups = {};\n    var groupsFound = 0;\n\n    if (typeof mapData.markers !== \"undefined\") {\n        for (var p=0; p < mapData.markers.length; p++) {\n\n            var point = mapData.markers[p];\n            var group = point.group;\n            if (typeof groups[group] === \"undefined\" ) {\n                // Array? Object?\n                // see http://stackoverflow.com/questions/9526860/why-does-a-string-index-in-a-javascript-array-not-increase-the-length-size\n                var color = Mercury.getThemeJSON(\"map-color[\" + groupsFound++ + \"]\", \"#ffffff\");\n                if (DEBUG) console.info(\"GoogleMap new marker group added: \" + group + \" with color: \" + color);\n                groups[group] = getPuempel(color);\n            }\n\n            // get marker data from calling object\n            var marker = new google.maps.Marker({\n                position: new google.maps.LatLng(point.lat, point.lng),\n                map: map,\n                title: point.title,\n                group: group,\n                icon: groups[group],\n                info: point.info,\n                index: p,\n                mapId: mapId,\n                geocode: point.geocode\n            });\n\n            // add marker to marker map\n            markers.push(marker);\n\n            // initialize info window\n            var infoWindow = new google.maps.InfoWindow({\n                content: marker.info,\n                marker: marker,\n                geocode: point.geocode,\n                index: p\n            });\n\n            // add marker to marker map\n            infoWindows.push(infoWindow);\n\n            if (DEBUG) console.info(\"GoogleMap attaching Event lister: \" + p + \" to map id \" + mapId);\n\n            // attach event listener that shows info window to marker\n            // see http://you.arenot.me/2010/06/29/google-maps-api-v3-0-multiple-markers-multiple-infowindows/\n            marker.addListener('click', function() {\n                showInfo(this.mapId, this.index);\n            });\n        }\n    }\n\n    // store map in global array, required e.g. to select marker groups etc.\n    var map = {\n        'id': mapId,\n        'map': map,\n        'markers': markers,\n        'infoWindows': infoWindows\n    };\n    m_maps[mapId] = map;\n}\n\nexport function initGoogleMaps() {\n\n    if (DEBUG) console.info(\"GoogleMap initGoogleMaps() called with data for \" + m_mapData.length + \" maps!\" );\n       for (var i=0; i < m_mapData.length; i++) {\n         if(!m_mapData[i].showPlaceholder){\n             showSingleMap(m_mapData[i]);\n          }\n       }\n}\n\nfunction showMap(event){\n\n    // called by click on hidden map element in edit mode\n    if (DEBUG) {console.log(\"GoogleMap show map with id: \" + event.currentTarget.id);}\n    var mapToShow= event.currentTarget;\n\n    for(var i=0; i<m_mapData.length;i++){\n        if(m_mapData[i].id == mapToShow.id){\n            m_mapData[i].showPlaceholder=false;\n            showSingleMap(m_mapData[i]);\n        }\n    }\n}\n\n/****** Exported functions ******/\n\nexport function init(jQuery, debug) {\n\n    jQ = jQuery;\n    DEBUG = debug;\n\n    m_apiKey = Mercury.getInfo(\"googleApiKey\");\n\n    if (DEBUG) {\n        console.info(\"GoogleMap.init()\");\n        if (m_apiKey != null) {\n            // Goggle map key is read in mercury:pageinfo tag and read to JavaScript via Mercury.init()\n            console.info(\"GoogleMap API key is: \" + Mercury.getInfo(\"googleApiKey\"));\n        } else {\n            console.info(\"GoogleMap API key not set - Google maps not activated\");\n        }\n    }\n\n    var $mapElements = jQ('.map-google .mapwindow');\n    if (DEBUG) console.info(\"GoogleMap.init() .map-google elements found: \" + $mapElements.length);\n\n    if ($mapElements.length > 0) {\n\n        if (m_apiKey != null) {\n\n            if (PrivacyPolicy.cookiesAcceptedExternal()) {\n\n                // initialize map style from JSON stored in CSS\n                m_mapStyle = Mercury.getThemeJSON(\"map-style\", []);\n\n                // initialize map sections with values from data attributes\n                $mapElements.each(function(){\n                    var $mapElement = jQ(this);\n\n                    if (typeof $mapElement.data(\"map\") !== \"undefined\") {\n                        var mapData = $mapElement.data(\"map\");\n                        if(typeof mapData === \"string\") {\n                            mapData = JSON.parse(mapData);\n                        }\n                        mapData.id = $mapElement.attr(\"id\");\n                        mapData.showPlaceholder = Mercury.initPlaceholder($mapElement, showMap);\n                        if (DEBUG) console.info(\"GoogleMap found with id: \" + mapData.id);\n                        m_mapData.push(mapData);\n                        if (! mapData.showPlaceholder) {\n                            $mapElement.removeClass('placeholder');\n                        }\n                    }\n                });\n\n                // load the Google map API\n                loadGoogleApi();\n\n            } else {\n                if (DEBUG) console.info(\"External cookies not accepted by the user - Google maps are disabled!\");\n            }\n\n        }\n    }\n}\n"],"sourceRoot":""}