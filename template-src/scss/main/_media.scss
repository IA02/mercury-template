// This program is part of the OpenCms Mercury Template.
//
// Copyright (c) Alkacon Software GmbH & Co. KG (http://www.alkacon.com)
//
// This program is free software: you can redistribute it and/or modify
// it under the terms of the GNU Affero General Public License as
// published by the Free Software Foundation, either version 3 of the
// License, or (at your option) any later version.
//
// This program is distributed in the hope that it will be useful,
// but WITHOUT ANY WARRANTY; without even the implied warranty of
// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
// GNU Affero General Public License for more details.
//
// You should have received a copy of the GNU Affero General Public License
// along with this program.  If not, see <http://www.gnu.org/licenses/>.

/**********
 * Source file: _media.scss
 */

$preview-text-shadow: 1px 1px 1px #000, 0px 0px 1px #000;
$preview-icon-shadow: 1px 1px 1px #000, 0px 0px 5px rgba(0,0,0,0.5);;


.type-media {
    &.square-col {
        .preview {
            height: 100%;
        }
    }

    @include media-breakpoint-down(sm) {
        &.text-below-on-xs {
            &.square-col .preview .image-src-box {
                position: relative;

                > img {
                    position: absolute;
                    width: 100%;
                    top: 50%;
                    left: 50%;
                    transform: translateX(-50%) translateY(-50%);
                    transition: none !important;
                }
            }
            &.square-4-3 .preview .image-src-box {
                padding-bottom: 75%;
            }
            &.square-16-9 .preview .image-src-box {
                padding-bottom: 56.25%;
            }
        }
    }

    .media-box {
        position: relative;
    }

    .preview {
        position: relative;
        cursor: pointer;
        height: 100%;

        .centered {
            position: absolute;
            width: 100%;
            top: 50%;
            left: 50%;
            transform: translateX(-50%) translateY(-50%);
        }

        .icon {
            color: #fff;
            text-shadow: $preview-icon-shadow;
            font-size: 16px;
            text-align: center;
            z-index: #{$overflow-z-index + 1};

            span {
                opacity: 0.7;
                display: block;
                font-size: 60px;
            }
            div {
                opacity: 1.0;
            }
        }

        .media-overlay-top,
        .media-overlay-bottom {
            position: absolute;
            bottom: 0;
            width: 100%;
            padding: 10px 20px;
            font-size: 16px;
            line-height: 1.2;
            text-shadow: $preview-text-shadow;
            margin: 0;
            color: #fff;
            z-index: #{$overflow-z-index + 1};
        }
        .media-overlay-top {
            top: 10px;
            bottom: initial;
            max-height: 75%;
            overflow: hidden;

            > .main-header > .title,
            > .sub-header,
            h1, h2, h3 {
                color: #fff;
                text-shadow: $preview-text-shadow;
            }
        }

        .media-date {
            float: right;
        }

        &:hover {
            .icon span {
                opacity: 1.0;
            }
        }
    }

    .col-visual,
    .teaser-visual {
        position: relative;
    }

    .content {
        @include round-corners($image-border-radius);
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        overflow: hidden;
        background-color: #000;
        z-index: $overflow-z-index;

        iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
    }

    // special adjustment for YouTube media element in 16x9 squares
    .preview.video .centered.image {
        width: 101%;
    }
    @include media-breakpoint-up(xl) {
        &.square-large.square-16-9 .preview.video .centered.image {
            width: 104%;
        }
    }

    .presized {
        position: relative;
        width: 100%;
        height: initial;
        padding-bottom: 100%;
        overflow: hidden;
    }
}


// Onclock activation

.onclick-activation {
    position: relative;
    cursor: pointer;
    margin-bottom: $default-margin;

    @include round-corners($image-border-radius);

    .oa-heading,
    .oa-notice {
        color: #fff;
        text-shadow: $preview-text-shadow;
        padding: 0 $default-margin;
        margin: 0;
        z-index: #{$overflow-z-index + 2};
    }

    .oa-heading {
        @extend .h3;
    }

    .oa-icon {
        color: #fff;
        text-shadow: $preview-icon-shadow;
        text-align: center;
        z-index: #{$overflow-z-index + 1};

        span {
            opacity: 0.7;
            display: block;
            font-size: 60px;
        }
        div {
            opacity: 1.0;
        }
    }

    .centered {
        position: absolute;
        width: 100%;
        top: 50%;
        left: 50%;
        transform: translateX(-50%) translateY(-50%);
    }

    &:hover {
        .oa-icon span {
            opacity: 1.0;
        }
    }

    &.no-image {
        background-color: $main-theme;
    }

    @mixin compact-display {
        .oa-heading,
        .oa-notice {
            position: relative;
            padding-top: $default-margin-small;
            padding-bottom: $default-margin-small;
        }
        .centered {
            top: $default-margin-small;
            left: auto;
            transform: none;
        }
        .oa-icon {
            text-align: right;
            padding-right: $default-margin;
        }
        &.has-icon {
            .oa-heading {
                padding-right: 80px;
            }
        }
    }

    &.compact {
        @include compact-display;
    }

    &.presized {
        .oa-heading,
        .oa-notice {
            position: absolute;
        }
        .oa-heading {
            top: $default-margin;
        }
        .oa-notice {
            bottom: $default-margin-small;
        }
    }

    @include media-breakpoint-down(sm) {
        &.presized {
            &.no-image,
            &.has-image {
                @include compact-display;
            }
            &.no-image {
                padding-bottom: 0 !important;
                .oa-heading {
                    top: auto;
                }
                .oa-notice {
                    bottom: auto;
                }
            }
            &.has-image {
                .oa-heading,
                .oa-notice {
                    position: absolute;
                }
                .oa-heading {
                    top: 0;
                }
                .oa-notice {
                    bottom: 0;
                }
            }
        }
        .oa-heading {
            font-size: $h4-font-size-mobile;
            line-height: 1.1;
        }
        .oa-notice {
            font-size: $font-size-sm;
            line-height: 1.2;
        }
    }
}

