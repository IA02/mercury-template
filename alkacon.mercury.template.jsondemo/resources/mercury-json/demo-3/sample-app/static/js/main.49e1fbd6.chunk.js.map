{"version":3,"sources":["demo/footer.js","demo/header.js","section.js","index.js"],"names":["DemoFooter","props","view","state","className","href","React","Component","DemoHeader","Section","demo3","content","settings","pieceLayout","this","sectionTitle","renderTitle","sectionText","renderText","sectionLink","renderLink","fullWidthImage","pieceImage","renderImage","pieceText","showPieceImage","showPieceText","image","localeContent","Image","showImage","imageTitle","Title","imageLink","link","imageSrc","SERVER","classFull","src","alt","Link","showLink","linkUri","URI","linkText","Text","text","showText","dangerouslySetInnerHTML","__html","title","hsize","visualOption","show","linkOption","showTitle","textOption","Demo3","process","ENDPOINT","PARAMS","page","loadPage","self","url","fetch","then","response","json","setState","containers","visitContainers","type","attributes","container","elements","visitElements","map","visitContainer","element","formatterKey","path","linkedContents","length","endsWith","renderContent","idx","visitElement","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.49e1fbd6.chunk.js","sourcesContent":["import React from 'react';\n\nclass DemoFooter extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.view = props.view;\n    this.state = props.state;\n  }\n\n  render() {\n    return (\n      <footer>\n        <div>\n          <h4>Demo using the OpenCms JSON API.</h4>\n          <div className=\"flex column\">\n            <a href=\"#\" className=\"doc\">Read the API Documentation</a>\n            <a href=\"#\" className=\"github\">View the Demo Source on GitHub</a>\n          </div>\n        </div>\n      </footer>\n    )\n  }\n}\n\nexport default DemoFooter;\n","import React from 'react';\n\nclass DemoHeader extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.view = props.view;\n    this.state = props.state;\n  }\n\n  render() {\n    return (\n      <header>\n        <h1>Demo.</h1>\n        <h4>\n          <span>A demo single page application using </span>\n          <a href=\"#\">React.js</a>\n          <span> and </span>\n          <a href=\"#\">OpenCms</a>.\n        </h4>\n      </header>\n    )\n  }\n}\n\nexport default DemoHeader;\n","import React from 'react';\n\n/**\n * Class representing a section component.\n */\nclass Section extends React.Component {\n\n  /**\n   * Creates a new component.\n   */\n  constructor(props) {\n    super(props);\n    /** The demo 3 application. */\n    this.demo3 = props.demo3;\n    /** The content to render. */\n    this.content = props.content;\n    /** The formatter settings. */\n    this.settings = props.settings;\n  }\n\n  /**\n   * Renders this component according to formatter settings.\n   */\n  render() {\n    const pieceLayout = this.settings.pieceLayout;\n    const sectionTitle = this.renderTitle();\n    const sectionText = this.renderText();\n    const sectionLink = this.renderLink();\n    const fullWidthImage = !(sectionTitle && sectionText && sectionLink);\n    const pieceImage = this.renderImage(fullWidthImage);\n    const pieceText = (\n      <div>\n      {sectionTitle}\n      {sectionText}\n      {sectionLink}\n      </div>\n    )\n    if (pieceLayout === '6') { // image left, text right\n      return (\n        <div className=\"list\">\n        {this.showPieceImage() ? pieceImage : false}\n        {this.showPieceText() ? pieceText : false}\n        </div>\n      )\n    } else if (pieceLayout === '7') { // text left, image right\n      return (\n        <div className=\"list\">\n        {this.showPieceText() ? pieceText : false}\n        {this.showPieceImage() ? pieceImage : false}\n        </div>\n      )\n    }\n    return (\n      <div>Unknown pieceLayout setting: {pieceLayout}.</div>\n    )\n  }\n\n  /**\n   * Renders the image of this section.\n   */\n  renderImage(fullWidthImage) {\n    const image = this.content.localeContent.Image;\n    if (this.showImage() && image) {\n      const imageTitle = image.Title;\n      const imageLink = image.Image.link;\n      const imageSrc = this.demo3.SERVER + imageLink;\n      const classFull = fullWidthImage ? 'full' : null;\n      return (\n        <img src={imageSrc} alt={imageTitle} className={classFull}/>\n      )\n    }\n    return false;\n  }\n\n  /**\n   * Renders the link of this section.\n   */\n  renderLink() {\n    const link = this.content.localeContent.Link;\n    if (this.showLink() && link) {\n      const linkUri = '#' + link.URI.link;\n      const linkText = link.Text;\n      return (\n        <a href={linkUri}>{linkText}</a>\n      )\n    }\n    return false;\n  }\n\n  /**\n   * Renders the text of this section.\n   */\n  renderText() {\n    const text = this.content.localeContent.Text;\n    if (this.showText()) {\n      return (\n        <div dangerouslySetInnerHTML={{__html: text}}></div>\n      )\n    }\n    return false;\n  }\n\n  /**\n   * Renders the title of this section.\n   */\n  renderTitle() {\n    const title = this.content.localeContent.Title;\n    const hsize = this.settings.hsize;\n    if (hsize === '1') {\n      return (\n        <h1>{title}</h1>\n      )\n    } else if (hsize === '2') {\n      return (\n        <h2>{title}</h2>\n      )\n    } else if (hsize === '3') {\n      return (\n        <h3>{title}</h3>\n      )\n    } else if (hsize === '4') {\n      return (\n        <h4>{title}</h4>\n      )\n    } else if (hsize === '0') {\n      return false;\n    }\n    return (\n      <h2>Title</h2>\n    )\n  }\n\n  /**\n   * Whether to show the image of this section according to the settings.\n   */\n  showImage() {\n    const visualOption = this.settings.visualOption;\n    let show = true;\n    if (visualOption === '99') {\n      show = true;\n    } else if (visualOption === '0') {\n      show = false;\n    }\n    return show;\n  }\n\n  /**\n   * Whether to show the link of this section according to the settings.\n   */\n  showLink() {\n    const linkOption = this.settings.linkOption;\n    let show = true;\n    if (linkOption === 'button') {\n      show = true;\n    } else if (linkOption === 'none') {\n      show = false;\n    }\n    return show;\n  }\n\n  /**\n   * Whether to show the image piece of this section. Same as showImage().\n   */\n  showPieceImage() {\n    return this.showImage();\n  }\n\n  /**\n   * Whether to show the text piece of this section. True\n   * if either the text, the title, or the link is shown.\n   */\n  showPieceText() {\n    return this.showLink() || this.showText() || this.showTitle();\n  }\n\n  /**\n   * Whether to show the text of this section according to the settings.\n   */\n  showText() {\n    const textOption = this.settings.textOption;\n    let show = true;\n    if (textOption === 'default') {\n      show = true;\n    } else if (textOption === 'none') {\n      show = false;\n    }\n    return show;\n  }\n\n  /**\n   * Whether to show the title of this section according to the settings.\n   */\n  showTitle() {\n    const hsize = this.settings.hsize;\n    return hsize !== '0';\n  }\n}\n\nexport default Section;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport DemoFooter from './demo/footer';\nimport DemoHeader from './demo/header';\nimport Section from './section'\nimport './index.css';\n\n/**\n * Class representing the demo 3 component.\n */\nclass Demo3 extends React.Component {\n\n  /**\n   * Creates a new component.\n   */\n  constructor(props) {\n    super(props);\n    /** The server URL. */\n    this.SERVER =  process.env.REACT_APP_OPENCMS_SERVER;\n    /** The JSON endpoint. */\n    this.ENDPOINT = this.SERVER + '/json';\n    /** The URI of the page we will render. */\n    this.URI = '/sites/default/mercury-json/demo-3/sample-page/index.html';\n    /** The request parameters. */\n    this.PARAMS = '?content&wrapper&locale=en&fallbackLocale';\n    /** The state of this component. */\n    this.state = {\n      page: null\n    }\n  }\n\n  /**\n   * Handler. Called when this component did mount.\n   */\n  componentDidMount() {\n    this.loadPage();\n  }\n\n  /**\n   * Loads the page.\n   */\n  loadPage() {\n    const self = this;\n    const url = this.ENDPOINT + this.URI + this.PARAMS;\n    fetch(url)\n      .then(response => response.json())\n      .then((page) => {\n        self.setState({\n          page: page\n        });\n      });\n  }\n\n  /**\n   * Renders this component.\n   */\n  render() {\n    if (!this.state.page) {\n      return false;\n    }\n    const containers = this.state.page.containers;\n    return (\n      <main>\n        <div className=\"container\">\n          <DemoHeader />\n          {this.visitContainers(containers)}\n          <DemoFooter />\n        </div>\n      </main>\n    )\n  }\n\n  /**\n   * Renders a content.\n   */\n  renderContent(content, settings) {\n    const type = content.attributes.type;\n    if (type === 'm-section') {\n      return (\n        <Section demo3={this} content={content} settings={settings}/>\n      )\n    } else {\n      return (\n        <div>Content type {type} is not supported.</div>\n      )\n    }\n  }\n\n  /**\n   * Visits a container.\n   */\n  visitContainer(container) {\n    const elements = container.elements;\n    return this.visitElements(elements);\n  }\n\n  /**\n   * Visit all containers of a page or an element.\n   */\n  visitContainers(containers) {\n    const self = this;\n    const html = containers.map(container => {\n      return self.visitContainer(container);\n    });\n    return html;\n  }\n\n  /**\n   * Visits an element. If the element has containers, visit them.\n   * If the element has no containers, render the content.\n   */\n  visitElement(element) {\n    const containers = element.containers;\n    const formatterKey = element.formatterKey;\n    const path = element.path;\n    const content = this.state.page.linkedContents[path];\n    const settings = element.settings;\n    if (containers.length) {\n      return this.visitContainers(containers);\n    } else if (formatterKey && formatterKey.endsWith('/json')) {\n      return this.renderContent(content, settings);\n    } else {\n      return false;\n    }\n  }\n\n  /**\n   * Visit all elements of a container.\n   */\n  visitElements(elements) {\n    const self = this;\n    const html = elements.map((element, idx) => {\n      return self.visitElement(element);\n    });\n    return html;\n  }\n}\n\n/**\n * Render the demo 3 application.\n */\nReactDOM.render(\n  <Demo3/>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}