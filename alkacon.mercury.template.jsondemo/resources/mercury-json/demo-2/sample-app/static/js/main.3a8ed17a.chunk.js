(this.webpackJsonpdemo2=this.webpackJsonpdemo2||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var i=n(2),o=n(3),s=n(6),r=n(5),c=n(4),a=n(1),l=n.n(a),d=n(8),h=n.n(d),u=n(0),j=function(e){Object(r.a)(n,e);var t=Object(c.a)(n);function n(e){var o;return Object(i.a)(this,n),(o=t.call(this,e)).demo2=e.demo2,o.content=e.content,o}return Object(o.a)(n,[{key:"author",get:function(){var e=this.content.localeContent.Author;return e||!1}},{key:"caption",get:function(){var e=this.content.localeContent.Paragraph;if(e&&e instanceof Array&&e.length){var t=e[0].Caption;if(t)return t}return!1}},{key:"imageSrc",get:function(){var e=this.content.localeContent.Paragraph;if(e&&e instanceof Array&&e.length){var t=e[0].Image;if(t){var n=t.Image.link;return n=n?this.demo2.SERVER+n:"/favicon.ico"}}return!1}},{key:"intro",get:function(){var e=this.content.localeContent.Intro;return e||!1}},{key:"text",get:function(){var e=this.content.localeContent.Paragraph;if(e&&e instanceof Array&&e.length){var t=e[0].Text;if(t)return t}return!1}},{key:"title",get:function(){var e=this.content.localeContent.Title;return e||!1}},{key:"render",value:function(){return Object(u.jsxs)("div",{children:[Object(u.jsxs)("h3",{children:[this.title," (Detail)"]}),Object(u.jsxs)("p",{children:["by ",this.author]}),Object(u.jsx)("p",{children:this.intro}),Object(u.jsx)("img",{src:this.imageSrc,alt:this.caption?this.caption:this.title,width:"500"}),Object(u.jsx)("div",{dangerouslySetInnerHTML:{__html:this.text}})]})}}]),n}(l.a.Component),m=function(e){Object(r.a)(n,e);var t=Object(c.a)(n);function n(e){var o;return Object(i.a)(this,n),(o=t.call(this,e)).demo2=e.demo2,o.content=e.content,o}return Object(o.a)(n,[{key:"email",get:function(){var e=this.content.localeContent.Contact;return!(!e||!e.Email)&&e.Email.Email}},{key:"firstName",get:function(){var e=this.content.localeContent.Name;return!!e&&e.FirstName}},{key:"imageSrc",get:function(){var e=this.content.localeContent.Image;return!!e&&this.demo2.SERVER+e.Image.link}},{key:"kind",get:function(){var e=this.content.localeContent.Kind;return e||!1}},{key:"lastName",get:function(){var e=this.content.localeContent.Name;return!!e&&e.LastName}},{key:"locality",get:function(){var e=this.content.localeContent.Contact,t=e.AddressChoice.Address,n=e.AddressChoice.PoiLink;if(t)return t.Locality;if(n){var i=n.path,o=this.content.linkedContents[i].localeContent.Address.Locality;if(o)return o}return!1}},{key:"mobile",get:function(){var e=this.content.localeContent.Contact;return!!e&&e.Mobile}},{key:"organization",get:function(){return this.content.localeContent.Organization}},{key:"phone",get:function(){var e=this.content.localeContent.Contact;return!!e&&e.Phone}},{key:"position",get:function(){return this.content.localeContent.Position}},{key:"postalCode",get:function(){var e=this.content.localeContent.Contact,t=e.AddressChoice.Address,n=e.AddressChoice.PoiLink;if(t)return t.PostalCode;if(n){var i=n.path,o=this.content.linkedContents[i].localeContent.Address.PostalCode;if(o)return o}return!1}},{key:"streetAddress",get:function(){var e=this.content.localeContent.Contact,t=e.AddressChoice.Address,n=e.AddressChoice.PoiLink;if(t)return t.StreetAddress;if(n){var i=n.path,o=this.content.linkedContents[i].localeContent.Address.StreetAddress;if(o)return o}return!1}},{key:"render",value:function(){console.log(this.content);var e="person"===this.kind&&Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{children:["Email: ",Object(u.jsx)("a",{href:"email:"+this.email,children:this.email})]}),Object(u.jsxs)("div",{children:["Mobile: ",this.mobile]})]});return Object(u.jsxs)("div",{className:"m-contact",children:[Object(u.jsxs)("h3",{children:[this.firstName," ",this.lastName," ",Object(u.jsx)("small",{children:this.position})]}),Object(u.jsx)("div",{children:Object(u.jsx)("strong",{children:this.organization})}),Object(u.jsx)("div",{children:this.streetAddress}),Object(u.jsxs)("div",{children:[this.postalCode," ",this.locality]}),Object(u.jsx)("img",{src:this.imageSrc,alt:this.firstName+" "+this.lastName+", "+this.position}),e,Object(u.jsxs)("div",{children:["Phone: ",this.phone]})]})}}]),n}(l.a.Component),b=(n(14),function(e){Object(r.a)(n,e);var t=Object(c.a)(n);function n(e){var o;return Object(i.a)(this,n),(o=t.call(this,e)).handleClickList=o.handleClickList.bind(Object(s.a)(o)),o.demo2=e.demo2,o}return Object(o.a)(n,[{key:"handleClickList",value:function(e){e.preventDefault(),this.demo2.loadList()}},{key:"render",value:function(){var e,t=this.demo2.state.content,n=t.properties.Title,i=t.attributes.type;return e="m-article"===i?Object(u.jsx)(j,{demo2:this.demo2,content:t}):"m-contact"===i?Object(u.jsx)(m,{demo2:this.demo2,content:t}):Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:n}),Object(u.jsxs)("p",{children:["Unknown detail type: ",i,"."]})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:"JSON API Demo 2"}),Object(u.jsxs)("p",{children:[Object(u.jsx)("a",{href:".",onClick:this.handleClickList,children:"Back"})," to the list."]}),e]})}}]),n}(l.a.Component)),v=function(e){Object(r.a)(n,e);var t=Object(c.a)(n);function n(e){var o;return Object(i.a)(this,n),(o=t.call(this,e)).handleClickContent=o.handleClickContent.bind(Object(s.a)(o)),o.handleShowMore=o.handleShowMore.bind(Object(s.a)(o)),o.demo2=e.demo2,o}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.demo2.loadList()}},{key:"handleClickContent",value:function(e){var t=e.path;this.demo2.loadContent(t)}},{key:"handleShowMore",value:function(e){this.demo2.loadListMore()}},{key:"render",value:function(){return Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:"JSON API Demo 2"}),this.renderList()]})}},{key:"renderItemArticle",value:function(e){return Object(u.jsxs)("div",{children:[this.renderUtilPreviewImage(e.localeContent.Paragraph[0].Image),Object(u.jsx)("div",{className:"demo2-list-item-label-wrapper",children:Object(u.jsx)("div",{className:"demo2-list-item-label",children:e.properties.Title})})]})}},{key:"renderItemContact",value:function(e){return Object(u.jsxs)("div",{children:[this.renderUtilPreviewImage(e.localeContent.Image),Object(u.jsx)("div",{className:"demo2-list-item-label-wrapper",children:Object(u.jsx)("div",{className:"demo2-list-item-label",children:e.properties.Title})})]})}},{key:"renderList",value:function(){var e=this,t=this.demo2.state.list,n=t.list?t.list.map((function(t,n){var i,o=t.attributes.type;return i="m-article"===o?e.renderItemArticle(t):"m-contact"===o?e.renderItemContact(t):Object(u.jsxs)("div",{children:["Unknown list type: ",o,"."]}),Object(u.jsxs)("div",{className:"demo2-list-item",onClick:function(n){return e.handleClickContent(t,n)},children:[Object(u.jsx)("small",{className:"demo2-list-item-type",children:t.attributes.type}),i]},t.properties.Title+n)})):null,i="",o=!0;t.listInfo&&(i+=(this.demo2.state.rows>t.listInfo.numFound?t.listInfo.numFound:this.demo2.state.rows)+"/"+t.listInfo.numFound,o=this.demo2.state.rows<t.listInfo.numFound);return Object(u.jsxs)("div",{className:"demo2-list",children:[Object(u.jsx)("h3",{children:t.Title}),Object(u.jsx)(O,{demo2:this.demo2}),Object(u.jsx)("div",{className:"demo2-list-items",children:n}),Object(u.jsxs)("div",{className:"demo2-list-show-more",children:[Object(u.jsxs)("span",{children:[i," "]}),Object(u.jsx)("button",{className:"demo2-list-show-more-button",onClick:this.handleShowMore,disabled:!o,children:Object(u.jsx)("big",{children:"Show more..."})})]})]})}},{key:"renderUtilPreviewImage",value:function(e){var t=e&&e.Image&&e.Image.link?this.demo2.SERVER+e.Image.link:this.demo2.SERVER+"/.galleries/cliparts/default.png",n=e&&e.Image&&e.Image.Title?e.Image.Title:"",i=Object(u.jsx)("img",{src:t,alt:n,className:"demo2-list-item-img"});return Object(u.jsx)("div",{className:"demo2-list-item-img-panel",children:i})}}]),n}(l.a.Component),O=function(e){Object(r.a)(n,e);var t=Object(c.a)(n);function n(e){var o;return Object(i.a)(this,n),(o=t.call(this,e)).handleChange=o.handleChange.bind(Object(s.a)(o)),o.demo2=e.demo2,o}return Object(o.a)(n,[{key:"handleChange",value:function(e){this.demo2.loadList(e.target.value)}},{key:"render",value:function(){return Object(u.jsxs)("div",{className:"demo2-select-sort",children:[Object(u.jsx)("label",{htmlFor:"demo2SelectSort",children:"Sort by "}),Object(u.jsxs)("select",{id:"demo2SelectSort",value:this.demo2.state.sort,onChange:this.handleChange,children:[Object(u.jsx)("option",{value:"DATE_ASC",children:"Date ascending"}),Object(u.jsx)("option",{value:"DATE_DESC",children:"Date descending"}),Object(u.jsx)("option",{value:"TITLE_ASC",children:"Title ascending"}),Object(u.jsx)("option",{value:"TITLE_DESC",children:"Title descending"}),Object(u.jsx)("option",{value:"ORDER_ASC",children:"Order ascending"}),Object(u.jsx)("option",{value:"ORDER_DESC",children:"Order descending"})]})]})}}]),n}(l.a.Component),f=function(e){Object(r.a)(n,e);var t=Object(c.a)(n);function n(e){var o;return Object(i.a)(this,n),(o=t.call(this,e)).SERVER="",o.ENDPOINT=o.SERVER+"/json",o.LIST="/sites/default/mercury-json/.content/list-m/list_00001.xml",o.PARAMS="?content&wrapper&locale=en&fallbackLocale",o.state={content:null,list:{},sort:"",rows:5},o}return Object(o.a)(n,[{key:"loadContent",value:function(e){var t=this,n=this.ENDPOINT+e+this.PARAMS;fetch(n).then((function(e){return e.json()})).then((function(e){t.setState({content:e,list:t.state.list,sort:t.state.sort,rows:t.state.rows})}))}},{key:"loadList",value:function(e,t){var n=this,i=this.ENDPOINT+this.LIST+this.PARAMS;e&&(i+="&sort="+e),t||(t=5),i+="&rows="+t,fetch(i).then((function(e){return e.json()})).then((function(o){console.log(i),console.log(o),e||(e=o.SortOrder),n.setState({content:null,list:o,sort:e,rows:t})}))}},{key:"loadListMore",value:function(){var e=this.state.rows+5;this.loadList(this.state.sort,e)}},{key:"render",value:function(){return this.state.content?Object(u.jsx)(b,{demo2:this}):Object(u.jsx)(v,{demo2:this})}}]),n}(l.a.Component);h.a.render(Object(u.jsx)(f,{}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.3a8ed17a.chunk.js.map